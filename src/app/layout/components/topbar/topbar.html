<div class="layout-topbar">
    <a class="app-logo" routerLink="/">
        <img alt="app logo" [src]="logo()" />
        <span class="app-name">Verona</span>
    </a>

    <button #menubutton class="topbar-menubutton p-link cursor-pointer" type="button" (click)="onMenuButtonClick()">
        <span></span>
    </button>
    <ul class="topbar-menu">
        @for (item of tabs(); track item.routerLink; let i = $index) {
        <li>
            <a
                [routerLink]="item.routerLink"
                routerLinkActive="active-route"
                [routerLinkActiveOptions]="item.routerLinkActiveOptions || { paths: 'exact', queryParams: 'ignored', fragment: 'ignored', matrixParams: 'ignored' }"
                [fragment]="item.fragment"
                [queryParamsHandling]="item.queryParamsHandling"
                [preserveFragment]="item.preserveFragment!"
                [skipLocationChange]="item.skipLocationChange!"
                [replaceUrl]="item.replaceUrl!"
                [state]="item.state"
                [queryParams]="item.queryParams"
            >
                <span>{{ item.label }}</span>
            </a>
            <i class="pi pi-times" (click)="removeTab($event, i)"></i>
        </li>
        }
    </ul>

    <div class="topbar-actions">
        <p-button icon="pi pi-question-circle" rounded severity="contrast" (onClick)="onHelpButtonClick()" pTooltip="Centro de Ayuda" tooltipPosition="bottom"></p-button>
        <p-button icon="pi pi-palette" rounded severity="contrast" (onClick)="onConfigButtonClick()"></p-button>
        <!--      <div class="topbar-search" [ngClass]="{ 'topbar-search-active': searchActive() }">
            <button pButton [rounded]="true" severity="secondary" type="button" icon="pi pi-search" (click)="activateSearch()"></button>

            <div class="search-input-wrapper">
                <p-icon-field>
                    <input #searchinput type="text" pInputText placeholder="Search" (blur)="deactivateSearch()" (keydown.escape)="deactivateSearch()" />
                    <p-inputicon class="pi pi-search" />
                </p-icon-field>
            </div>
        </div> -->

        <div class="topbar-profile">
            <button class="topbar-profile-button" type="button" pStyleClass="@next" enterFromClass="hidden" enterActiveClass="animate-scalein" leaveToClass="hidden" leaveActiveClass="animate-fadeout" [hideOnOutsideClick]="true">
                <p-avatar [label]="(user?.name?.charAt(0) || 'U') + (user?.name?.charAt(0) || '')" size="large" shape="circle" styleClass="text-lg mr-2 font-semibold bg-primary text-primary-contrast" />

                <span class="profile-details">
                    <span class="profile-name">{{user?.name}}</span>
                    <span class="profile-job">{{user?.role?.label}}</span>
                </span>
                <i class="pi pi-angle-down"></i>
            </button>
            <ul class="list-none hidden p-2 sm:p-4 m-0 rounded-border shadow absolute bg-surface-0 dark:bg-surface-900 origin-top w-48 mt-2 right-0 top-auto">
                <li class="flex items-start flex-col">
                    <a pRipple routerLink="/administracion" class="flex p-2 rounded-border w-full items-center hover:bg-emphasis transition-colors duration-150 cursor-pointer">
                        <i class="pi pi-briefcase mr-4"></i>
                        <span>Administración</span>
                    </a>
                    <a pRipple class="flex p-2 rounded-border w-full items-center hover:bg-emphasis transition-colors duration-150 cursor-pointer">
                        <i class="pi pi-power-off mr-4"></i>
                        <span>Cerrar Sesión</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</div>
